---
title: "Hayden and Ying R and ggplot"
author: "Hayden Wainwright"
date: "3/23/2020"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
```

## Initial tutorial in R and ggplot

### Hayden and Ying

### Overview:

Research Question:

Does frog mortality rate change in current COVID-19 situation in Ontario?

H0: nothing will change
H1: Frog mortality rate decreases with decreasing traffic under Ontario lockdown 



### Topics to be dicussed

#### R Basics (5-10min tops) (Hayden):
1. how to make a project
2. markdown vs script
3. github links
4. handling error messages 
        (dependancies missing, unexpect ",", googling answers)
5. how to google 101
6. other helpful links (Ying)
    + Quick-R: https://www.statmethods.net/index.html 
    + ggplot2: https://learnr.wordpress.com 
7. packages
    + You need to install: pwr, ggplot2, dplyr, knitr, kableExtra

#### Simulating work (30min) (Hayden):
1. how to generate a "fake" data set

  -(Frog mortality, frog species (3), location (3), sampling year (2010-2020), Total number of cars)
  -generate date for each year separately, then can change number of cars for this year specifically, 
  -combine the data from different years into one data frame
  -start with 1 species and 1 location, add more in if you can later
  
2. how to export the data set

3. power analysis????? (can go if need be)




#### What is power analysis? (Ying)

```{r, echo=FALSE,warning=FALSE}
# How to make a nice table? Please check: https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html 

library(knitr)
library(kableExtra)

PAcol1 <- c("", "Null hypothesis H0 is true", "Alternative hypothesis H1 is ture")
PAcol2 <- c("Fail to reject H0", "Good", "Type II error")
PAcol3 <- c("Reject H0", "Type I error", "Power")
PAtable <- data.frame(PAcol1, PAcol2, PAcol3)
colnames(PAtable) <- NULL

kable(PAtable) %>%
  kable_styling(c("striped", "hover"), full_width = FALSE, position = "left")
```

**Statistical power** is the probability that the test correctly rejects the null hypothesis.

**Power** = Pr (Reject H0 | H1 is true) = 1 - Type II error rate

It mostly depends on:

* **Alpha level** - significance level = Type I error rate. Larger alpha, greater power.
    + Pr (observed | H0 is ture) < alpha, reject null 
    + Pr (observed | H0 is ture) > alpha, fail to reject null 

* **Effect size** - magnitude of the difference between groups. Larger effects, larger power. 

* **Sample size** - Larger sample size, smaller sampling error, greater statistical power. 

**A power analysis** can be used to estimate the minimum sample size required for an experiment, given a desired significance level, effect size, and statistical power.


#### How to do power analysis? (Ying)
```{r}
library(pwr)
# t-test
pwr.t.test(d = 0.2, sig.level = 0.05, power = 0.8, type = c("one.sample"))
# n is the sample size, d is the effect size, sig.level is alpha
# Cohen suggests that d values of 0.2, 0.5, and 0.8 represent small, medium, and large effect sizes respectively.
# type indicates a two-sample t-test, one-sample t-test or paired t-test.

# ANOVA
pwr.anova.test(k=5,f=.25,sig.level=.05,power=.8)
# 

# correlation
pwr.r.test(r = 0.2, sig.level = 0.05, power = 0.8)
# n is the sample size and r is the correlation



```




#### Estimation Stats? (Ying)
There have been a lot of discussions in terms of not using p-value. 

Check this website: https://www.estimationstats.com/?fbclid=IwAR0d6nqcf3IbNgSb772R3TnzL4Nv7AtQFmLNToBvISmQmEMFyyVF6FdJ-lc#/background. 

Some example papers: 

  * Sullivan and Feinn. 2002. Using Effect Sizeâ€”or Why the P Value Is Not Enough.


- Test width of confidence interval for effect size 






#### dplyr (20 min) (Ying):
1. Import Data
2. How to change data into what you want
3. how to get rid of NA in your data
4. how to make a new collumn in your data
5. how to change the orientation and layout of your data (Hayden)
6. double checking data sets for spelling mistakes
7. piping and filtering/sort data
8. creating new data frames
9. how to make a small program (for loop, if statements, make your own functions) (Hayden to help)



#### ggplot (20min) (Ying and Hayden):
1. qplot 
2. plotting basic functions in ggplot using geoms
    + boxplot plot: mortality vs year 
3. adding trend lines 
    + scatter plot + linear model: mortality vs traffic 
4. adding multiple data sets to same graph
5. anotate text and axises
6. changin colour schemes and shapes
    + fill color of different frog species, different locations
7. change theme of a plot 
8. plotting models 
9. confidence intervals and standard error bars
    + linear model: mortality vs traffic, mortality vs food supply in ontario 
10. how to add multiple plots to one graph space





